"use strict";!function(t){t.fn.fullSlide=function(n){n=t.extend({slide:".page",currentIndex:0,callback:function(){}},n);var a=t(this),e=t(window).height(),r=n.currentIndex,o=a.find(n.slide),i=!1,l=function(){a.height(e);var l,c=0>r-1?o.length-1:r-1,u=r+1>=o.length?0:r+1,g=0;f(r,c,u),t("body").on("touchstart",function(t){t.preventDefault();var n=t.changedTouches[0];g=n.pageY}).on("touchmove",function(t){t.preventDefault();var n=t.changedTouches[0];l=n.pageY-g,p(-l),g=n.pageY}).on("touchend",function(){var a=t(o.get(r)).data("top"),i=0,s=0,f=0;0>l?(s=r+1,f=r,i=e+a):(s=r,f=r+1,i=a),s>=o.length&&(s=0),f>=o.length&&(f=0),p(i,300,function(){n.callback(s,f,o.get(s),o.get(f))})});var p=function(n,a,l){a=a||0;for(var f=a>0?"ease-in-out":"linear",c=0;c<o.length;c++){var u=t(o.get(c)).data("top");if(0>=u&&u>-e){r=c;break}}var g=(r+1)%o.length,p=0>r-1?o.length-1:r-1,h=o.get(r),d=o.get(p),m=o.get(g),v=t(h).data("top");i||(i=!0,t(h).animate({"-webkit-transform":"translateY("+(v-n)+"px)",transform:"translateY("+(v-n)+"px)"},a,f,function(){s(h,v-n),i=!1,"function"==typeof l&&l()}),t(d).animate({"-webkit-transform":"translateY("+(v-n-e)+"px)",transform:"translateY("+(v-n)+"px)"},a,f,function(){s(d,v-e-n)}),t(m).animate({"-webkit-transform":"translateY("+(v-n+e)+"px)",transform:"translateY("+(v-n)+"px)"},a,f,function(){s(m,v+e-n)}))}},s=function(n,a){return t(n).css({"-webkit-transform":"translateY("+a+")",transform:"translateY("+a+")"}),t(n).data("top",a),t(n)},f=function(t,n,a){for(var r=0;r<o.length;r++)r===a?(o.get(r).style.transform="translateY("+e+"px)",s(o.get(r),e)):r===t?(o.get(r).style.transform="translateY(0px)",s(o.get(r),0)):(o.get(r).style.transform="translateY("+-e+"px)",s(o.get(r),-e))};l()}}(Zepto),$(function(){$(".wrap").fullSlide({callback:function(t,n,a,e){$(e).removeClass("animation"),$(a).addClass("animation")}})});